<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apply - TalentFlow</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        :root {
            --primary-color: #0891B2;
            --primary-hover-color: #06B6D4;
            --text-color-dark: #1E293B;
            --text-color-medium: #64748B;
            --text-color-light: #94A3B8;
            --background-color: #F8FAFC;
            --card-background: #FFFFFF;
            --border-color: #E2E8F0;
            --success-color: #10B981;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        html, body { height: 100%; }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--background-color);
            color: var(--text-color-dark);
            display: flex;
            flex-direction: column;
            line-height: 1.6;
        }
        
        .app-header, .app-footer {
            flex-shrink: 0;
            padding: 20px 24px;
            background-color: var(--card-background);
            border-color: var(--border-color);
            width: 100%;
        }
        .app-header { border-bottom: 1px solid var(--border-color); }
        .logo { font-weight: 700; font-size: 1.5rem; display: flex; align-items: center; gap: 8px; color: var(--primary-color); }
        .app-footer { border-top: 1px solid var(--border-color); text-align: center; font-size: 0.875rem; color: var(--text-color-light); }
        .app-footer a { color: var(--text-color-medium); text-decoration: none; margin: 0 8px; }
        .app-footer a:hover { color: var(--primary-color); }

        .page-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            flex-grow: 1;
            width: 100%;
            padding: 40px 24px;
            overflow-y: auto;
        }
        
        .form-container {
            width: 100%;
            max-width: 600px;
        }

        .progress-indicator {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 8px;
            text-align: center;
        }

        .page-title {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 32px;
            text-align: center;
        }

        .form-step { display: none; }
        .form-step.active { display: block; }

        .form-group { margin-bottom: 20px; position: relative; }
        .form-group label { display: block; font-weight: 500; margin-bottom: 6px; font-size: 0.875rem; }
        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-size: 1rem;
            background-color: var(--card-background);
            color: var(--text-color-dark);
        }
        .form-group textarea { resize: vertical; min-height: 100px; }
        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(8, 145, 178, 0.1);
        }
        .password-toggle { position: absolute; top: 38px; right: 12px; cursor: pointer; color: var(--text-color-light); }
        
        .form-actions { display: flex; justify-content: space-between; align-items: center; margin-top: 32px; }
        .btn { display: inline-flex; align-items: center; justify-content: center; gap: 8px; padding: 12px 24px; border: 1px solid transparent; border-radius: 8px; font-size: 1rem; font-weight: 600; cursor: pointer; transition: all 0.2s ease; }
        .btn-primary { background-color: var(--primary-color); color: white; }
        .btn-primary:hover { background-color: var(--primary-hover-color); }
        .btn-link { background: none; border: none; color: var(--text-color-medium); font-weight: 500; cursor: pointer; }

        #conditional-fields { display: none; }

        .resume-upload-area { border: 2px dashed var(--border-color); border-radius: 8px; padding: 40px; text-align: center; background-color: var(--card-background); color: var(--text-color-medium); cursor: pointer; margin-bottom: 24px; }
        .resume-upload-area p span { color: var(--primary-color); font-weight: 500; }
        #resume-file-name { margin-top: 8px; font-style: italic; }

        .review-summary { background-color: var(--card-background); padding: 24px; border-radius: 12px; border: 1px solid var(--border-color); }
        .review-section { margin-bottom: 24px; }
        .review-section:last-child { margin-bottom: 0; }
        .review-section h3 { font-size: 1.25rem; margin-bottom: 12px; border-bottom: 1px solid var(--border-color); padding-bottom: 8px; }
        .review-item { display: flex; justify-content: space-between; padding: 4px 0; }
        .review-item .label { color: var(--text-color-medium); }
        .review-item .value { font-weight: 500; text-align: right; }

        .confirmation-icon { width: 64px; height: 64px; border-radius: 50%; background-color: #d1fae5; color: var(--success-color); display: flex; align-items: center; justify-content: center; margin: 0 auto 16px; }
        .confirmation-icon i { width: 40px; height: 40px; }

    </style>
</head>
<body>
    <header class="app-header">
        <div class="logo">
            <svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg>
            TalentFlow
        </div>
    </header>

    <main class="page-container">
        <div class="form-container">
            <!-- Step 1: Account -->
            <section id="step-1" class="form-step active">
                <p class="progress-indicator">Step 1 of 4: Account</p>
                <h1 class="page-title">Create Your Profile</h1>
                <form id="form-step-1">
                    <div class="form-group">
                        <label for="email">Email Address</label>
                        <input type="email" id="email" required>
                    </div>
                    <div class="form-group">
                        <label for="password">Create Password</label>
                        <input type="password" id="password" required>
                        <span class="password-toggle" data-for="password"><i data-lucide="eye"></i></span>
                    </div>
                    <div class="form-group">
                        <label for="confirm-password">Confirm Password</label>
                        <input type="password" id="confirm-password" required>
                        <span class="password-toggle" data-for="confirm-password"><i data-lucide="eye"></i></span>
                    </div>
                    <div class="form-actions" style="justify-content: flex-end;">
                        <button type="submit" class="btn btn-primary">Next: Personal Details</button>
                    </div>
                </form>
            </section>

            <!-- Step 2: Your Details -->
            <section id="step-2" class="form-step">
                <p class="progress-indicator">Step 2 of 4: Your Details</p>
                <h1 class="page-title">Personal & Contact Details</h1>
                <form id="form-step-2">
                    <div class="form-group"><label for="first-name">First Name</label><input type="text" id="first-name" required></div>
                    <div class="form-group"><label for="last-name">Last Name</label><input type="text" id="last-name" required></div>
                    <div class="form-group"><label for="phone">Phone Number</label><input type="tel" id="phone" required></div>
                    <div class="form-group"><label for="country">Country</label><select id="country" required><option value="">Select a country...</option><option value="USA">United States</option><option value="Canada">Canada</option><option value="UK">United Kingdom</option></select></div>
                    <div class="form-group"><label for="address">Address</label><textarea id="address" required></textarea></div>
                    <div class="form-group"><label for="linkedin">LinkedIn Profile URL (Optional)</label><input type="url" id="linkedin"></div>
                    <div class="form-actions">
                        <button type="button" class="btn-link" data-nav="back">Back</button>
                        <button type="submit" class="btn btn-primary">Next: Professional Experience</button>
                    </div>
                </form>
            </section>

            <!-- Step 3: Experience -->
            <section id="step-3" class="form-step">
                <p class="progress-indicator">Step 3 of 4: Experience</p>
                <h1 class="page-title">Professional Experience</h1>
                <form id="form-step-3">
                    <div class="form-group">
                        <label for="employment-status">Employment Status</label>
                        <select id="employment-status" required>
                            <option value="working">I am currently working</option>
                            <option value="fresher">I am a recent graduate (Fresher)</option>
                            <option value="break">I am on a career break</option>
                        </select>
                    </div>
                    <div id="conditional-fields">
                        <div class="form-group"><label for="company-name">Current Company Name</label><input type="text" id="company-name"></div>
                        <div class="form-group"><label for="job-title">Current Job Title</label><input type="text" id="job-title"></div>
                    </div>
                    <div class="form-group"><label for="experience-years">Total Years of Experience</label><input type="number" id="experience-years" required></div>
                    <div class="form-actions">
                        <button type="button" class="btn-link" data-nav="back">Back</button>
                        <button type="submit" class="btn btn-primary">Next: Upload Resume</button>
                    </div>
                </form>
            </section>

            <!-- Step 4: Final Review -->
            <section id="step-4" class="form-step">
                <p class="progress-indicator">Step 4 of 4: Final Review</p>
                <h1 class="page-title">Resume & Final Review</h1>
                <div class="resume-upload-area" id="resume-drop-area">
                    <input type="file" id="resume-file-input" hidden accept=".pdf,.doc,.docx,.txt">
                    <p><span>Click to upload resume</span> or drag and drop</p>
                    <p id="resume-file-name"></p>
                </div>
                <div class="review-summary">
                    <div class="review-section"><h3>Account</h3><div class="review-item"><span class="label">Email</span><span class="value" id="review-email"></span></div></div>
                    <div class="review-section"><h3>Personal Details</h3><div class="review-item"><span class="label">Full Name</span><span class="value" id="review-name"></span></div><div class="review-item"><span class="label">Phone</span><span class="value" id="review-phone"></span></div><div class="review-item"><span class="label">Country</span><span class="value" id="review-country"></span></div><div class="review-item"><span class="label">Address</span><span class="value" id="review-address"></span></div><div class="review-item"><span class="label">LinkedIn</span><span class="value" id="review-linkedin"></span></div></div>
                    <div class="review-section"><h3>Experience</h3><div class="review-item"><span class="label">Employment Status</span><span class="value" id="review-status"></span></div><div class="review-item"><span class="label">Current Company</span><span class="value" id="review-company"></span></div><div class="review-item"><span class="label">Current Title</span><span class="value" id="review-title"></span></div><div class="review-item"><span class="label">Years of Experience</span><span class="value" id="review-experience"></span></div></div>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn-link" data-nav="back">Back</button>
                    <button type="button" id="submit-application" class="btn btn-primary">Submit Application</button>
                </div>
            </section>

            <!-- Final Confirmation Screen -->
            <section id="step-5" class="form-step" style="text-align: center;">
                 <div class="confirmation-icon"><i data-lucide="check"></i></div>
                 <h1 class="page-title">Application Submitted!</h1>
                 <p style="max-width: 450px; color: var(--text-color-medium);">Thank you for applying. Our team will review your profile and get in touch if there is a good fit.</p>
            </section>

        </div>
    </main>

    <footer class="app-footer">
        <a href="#">Privacy Policy</a> &bull; <a href="#">Terms of Service</a><br>
        Powered by TalentFlow
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            lucide.createIcons();

            // --- THEME SWITCHER LOGIC ---
            const themeBtn = document.getElementById('theme-btn');
            if (themeBtn) { // Adding a check in case it's removed later
                const themeDropdown = document.getElementById('theme-dropdown');
                const themeOptions = document.querySelectorAll('.theme-option');
                const setTheme = (theme) => {
                    document.body.dataset.theme = theme;
                    localStorage.setItem('talentflow-theme', theme);
                };
                themeBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    themeDropdown.classList.toggle('show');
                });
                themeOptions.forEach(option => {
                    option.addEventListener('click', () => setTheme(option.dataset.themeValue));
                });
                window.addEventListener('click', () => themeDropdown.classList.remove('show'));
                const savedTheme = localStorage.getItem('talentflow-theme') || 'ocean';
                setTheme(savedTheme);
            }

            // --- MULTI-STEP FORM LOGIC ---
            const steps = document.querySelectorAll('.form-step');
            if (steps.length === 0) return; // Don't run if the form isn't on the page

            const forms = {
                step1: document.getElementById('form-step-1'),
                step2: document.getElementById('form-step-2'),
                step3: document.getElementById('form-step-3'),
            };
            const backBtns = document.querySelectorAll('[data-nav="back"]');
            const submitBtn = document.getElementById('submit-application');

            let currentStep = 1;
            const applicationData = {};

            const showStep = (stepNumber) => {
                steps.forEach(step => step.classList.remove('active'));
                const nextStep = document.getElementById(`step-${stepNumber}`);
                if (nextStep) {
                    nextStep.classList.add('active');
                    currentStep = stepNumber;
                    window.scrollTo(0, 0);
                }
            };

            // --- Navigation & Data Handling ---
            forms.step1.addEventListener('submit', (e) => {
                e.preventDefault();
                const password = document.getElementById('password').value;
                const confirmPassword = document.getElementById('confirm-password').value;
                if (password !== confirmPassword) {
                    alert('Passwords do not match.');
                    return;
                }
                applicationData.email = document.getElementById('email').value;
                applicationData.password = password;
                showStep(2);
            });

            forms.step2.addEventListener('submit', (e) => {
                e.preventDefault();
                applicationData.firstName = document.getElementById('first-name').value;
                applicationData.lastName = document.getElementById('last-name').value;
                applicationData.phone = document.getElementById('phone').value;
                applicationData.country = document.getElementById('country').value;
                applicationData.address = document.getElementById('address').value;
                applicationData.linkedin = document.getElementById('linkedin').value;
                showStep(3);
            });

            forms.step3.addEventListener('submit', (e) => {
                e.preventDefault();
                applicationData.employmentStatus = document.getElementById('employment-status').value;
                if (applicationData.employmentStatus === 'working') {
                    applicationData.companyName = document.getElementById('company-name').value;
                    applicationData.jobTitle = document.getElementById('job-title').value;
                } else {
                    applicationData.companyName = '';
                    applicationData.jobTitle = '';
                }
                applicationData.experienceYears = document.getElementById('experience-years').value;
                populateReviewPage();
                showStep(4);
            });

            backBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    if (currentStep > 1) {
                        showStep(currentStep - 1);
                    }
                });
            });

            submitBtn.addEventListener('click', () => {
                if (!applicationData.resumeFile) {
                    alert('Please upload a resume before submitting.');
                    return;
                }
                console.log("Final Application Data:", applicationData);
                showStep(5);
            });

            function populateReviewPage() {
                document.getElementById('review-email').textContent = applicationData.email || 'N/A';
                document.getElementById('review-name').textContent = `${applicationData.firstName || ''} ${applicationData.lastName || ''}`;
                document.getElementById('review-phone').textContent = applicationData.phone || 'N/A';
                document.getElementById('review-country').textContent = applicationData.country || 'N/A';
                document.getElementById('review-address').textContent = applicationData.address || 'N/A';
                document.getElementById('review-linkedin').textContent = applicationData.linkedin || 'N/A';

                const statusSelect = document.getElementById('employment-status');
                const selectedStatusText = statusSelect.options[statusSelect.selectedIndex].text;
                document.getElementById('review-status').textContent = selectedStatusText;

                const companyReview = document.getElementById('review-company').parentElement;
                const titleReview = document.getElementById('review-title').parentElement;

                if (applicationData.employmentStatus === 'working') {
                    companyReview.style.display = 'flex';
                    titleReview.style.display = 'flex';
                    document.getElementById('review-company').textContent = applicationData.companyName || 'N/A';
                    document.getElementById('review-title').textContent = applicationData.jobTitle || 'N/A';
                } else {
                    companyReview.style.display = 'none';
                    titleReview.style.display = 'none';
                }
                document.getElementById('review-experience').textContent = `${applicationData.experienceYears || 0} years`;
            }

            // --- Feature-specific Logic ---
            const employmentStatusSelect = document.getElementById('employment-status');
            employmentStatusSelect.addEventListener('change', (e) => {
                const conditionalFields = document.getElementById('conditional-fields');
                const companyInput = document.getElementById('company-name');
                const titleInput = document.getElementById('job-title');
                if (e.target.value === 'working') {
                    conditionalFields.style.display = 'block';
                    companyInput.required = true;
                    titleInput.required = true;
                } else {
                    conditionalFields.style.display = 'none';
                    companyInput.required = false;
                    titleInput.required = false;
                }
            });
            employmentStatusSelect.dispatchEvent(new Event('change'));

            document.querySelectorAll('.password-toggle').forEach(toggle => {
                toggle.addEventListener('click', () => {
                    const inputId = toggle.dataset.for;
                    const input = document.getElementById(inputId);
                    const icon = toggle.querySelector('i');
                    if (input.type === "password") {
                        input.type = "text";
                        icon.setAttribute('data-lucide', 'eye-off');
                    } else {
                        input.type = "password";
                        icon.setAttribute('data-lucide', 'eye');
                    }
                    lucide.createIcons();
                });
            });

            const dropArea = document.getElementById('resume-drop-area');
            const fileInput = document.getElementById('resume-file-input');
            const fileNameEl = document.getElementById('resume-file-name');
            const handleFiles = (files) => {
                if (files.length > 0) {
                    applicationData.resumeFile = files[0];
                    fileNameEl.textContent = `File selected: ${applicationData.resumeFile.name}`;
                }
            };
            dropArea.addEventListener('click', () => fileInput.click());
            fileInput.addEventListener('change', () => handleFiles(fileInput.files));
            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                dropArea.addEventListener(eventName, (e) => { e.preventDefault(); e.stopPropagation(); }, false);
            });
            ['dragenter', 'dragover'].forEach(eventName => dropArea.addEventListener(eventName, () => dropArea.classList.add('dragover'), false));
            ['dragleave', 'drop'].forEach(eventName => dropArea.addEventListener(eventName, () => dropArea.classList.remove('dragover'), false));
            dropArea.addEventListener('drop', (e) => handleFiles(e.dataTransfer.files), false);
        });
    </script>
</body>
</html>
